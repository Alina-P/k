\nonstopmode
\documentclass{article}
\usepackage[poster,style=bubble]{k}
\title{IMPPP}
\begin{document}
\begin{kdefinition}
\maketitle
\begin{module}{\moduleName{IMPPP-SYNTAX}}

\begin{syntaxBlock}{\nonTerminal{\sort{AExp}}}\syntax{{\nonTerminal{\sort{Id}}}}{}\syntaxCont{{\nonTerminal{\sort{Int}}}}{}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\terminal{/}{{\nonTerminal{\sort{AExp}}}}}{prec(31), superheat, strict}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\terminal{+}{{\nonTerminal{\sort{AExp}}}}}{prec(33), superheat, strict}\syntaxCont{({\nonTerminal{\sort{AExp}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{BExp}}}\syntax{{\nonTerminal{\sort{Bool}}}}{}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\leq{{\nonTerminal{\sort{AExp}}}}}{prec(37), seqstrict}\syntaxCont{\terminal{not}{{\nonTerminal{\sort{BExp}}}}}{prec(53), strict}\syntaxCont{{{\nonTerminal{\sort{BExp}}}}\terminal{and}{{\nonTerminal{\sort{BExp}}}}}{prec(55), strict(1)}\syntaxCont{({\nonTerminal{\sort{BExp}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Stmt}}}\syntax{\terminal{skip}}{}\syntaxCont{\terminal{var}{{\nonTerminal{\sort{Ids}}}}}{prec(70)}\syntaxCont{\terminal{print}({{\nonTerminal{\sort{AExps}}}})}{strict}\syntaxCont{\terminal{halt}}{}\syntaxCont{{{\nonTerminal{\sort{Id}}}}\terminal{:=}{{\nonTerminal{\sort{AExp}}}}}{prec(80), strict(2)}\syntaxCont{\terminal{if}{{\nonTerminal{\sort{BExp}}}}\terminal{then}{{\nonTerminal{\sort{Stmt}}}}\terminal{else}{{\nonTerminal{\sort{Stmt}}}}}{prec(85), strict(1)}\syntaxCont{\terminal{while}{{\nonTerminal{\sort{BExp}}}}\terminal{do}{{\nonTerminal{\sort{Stmt}}}}}{prec(85)}\syntaxCont{\terminal{spawn}{{\nonTerminal{\sort{Stmt}}}}}{prec(90)}\syntaxCont{{{\nonTerminal{\sort{Stmt}}}}\terminal{;}{{\nonTerminal{\sort{Stmt}}}}}{prec(100)}\syntaxCont{({\nonTerminal{\sort{Stmt}}})}{}\syntaxCont{\{\}}{}\syntaxCont{\{{{\nonTerminal{\sort{Stmt}}}}\}}{gather(\&)}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Ids}}}\syntax{List\{Id, \mbox{``},\mbox{''}\}}{strict}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{AExp}}}\syntax{{\nonTerminal{\sort{String}}}}{}\syntaxCont{\terminal{++}{{\nonTerminal{\sort{Id}}}}}{prec(0)}\syntaxCont{\terminal{read}()}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{AExps}}}\syntax{List\{AExp, \mbox{``},\mbox{''}\}}{}
\end{syntaxBlock}
\end{module}
\begin{module}{\moduleName{IMPPP}}
\kconfig{\kall[yellow]{T}{\kall[orange]{threads}{\kall[red]{thread}{\kall[green]{k}{\variable[K]{\$PGM}}
\mathrel{}\kall[LightSkyBlue]{env}{\dotCt{Map}}
}
}
\mathrel{}\kall[white]{store}{\dotCt{Map}}
\mathrel{}\kall[gray]{nextLoc}{\constant[\#Int]{0}}
\mathrel{}\kall[magenta]{in}{\dotCt{List}}
\mathrel{}\kall[Orchid]{out}{\dotCt{List}}
}
}

\begin{syntaxBlock}{\nonTerminal{\sort{KResult}}}\syntax{{\nonTerminal{\sort{Int}}}}{}\syntaxCont{{\nonTerminal{\sort{Bool}}}}{}
\end{syntaxBlock}
\krule{
\kprefix[green]{k}{\reduce{\variable[Id]{X}}{\variable[Int]{I}}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{N}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{N}\mapsto\variable[Int]{I}}
}{}{supercool, transition}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{+}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{+_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{/}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\div_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{{\variable[Int]{I2}}\terminal{=/=Int}{\constant[\#Int]{0}}}{}
\krule{
\reduce{{\variable[Int]{I1}}\leq{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\leq_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{}
\krule{
\reduce{\terminal{not}{\variable[Bool]{T}}}{\neg_{\scriptstyle\it Bool}{\variable[Bool]{T}}}}{}{}
\krule{
\reduce{{\constant[\#Bool]{true}}\terminal{and}{\variable[BExp]{B}}}{\variable[BExp]{B}}}{}{}
\krule{
\reduce{{\constant[\#Bool]{false}}\terminal{and}{\variable[BExp]{B}}}{\constant[\#Bool]{false}}}{}{}
\krule{
\reduce{\terminal{skip}}{\dotCt{K}}}{}{}
\krule{
\kprefix[green]{k}{\reduce{{\variable[Id]{X}}\terminal{:=}{\variable[Int]{I}}}{\dotCt{K}}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{N}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{N}\mapsto\reduce{\AnyVar[List\{K\}]}{\variable[Int]{I}}}
}{}{transition}
\krule{
\reduce{{\variable[K]{S1}}\terminal{;}{\variable[K]{S2}}}{\variable[K]{S1}\kra\variable[K]{S2}}}{}{structural}
\krule{
\reduce{\terminal{if}{\constant[\#Bool]{true}}\terminal{then}{\variable[K]{S1}}\terminal{else}{\AnyVar[K]}}{\variable[K]{S1}}}{}{}
\krule{
\reduce{\terminal{if}{\constant[\#Bool]{false}}\terminal{then}{\AnyVar[K]}\terminal{else}{\variable[K]{S2}}}{\variable[K]{S2}}}{}{}
\krule{
\kprefix[green]{k}{\reduce{\terminal{while}{\variable[K]{B}}\terminal{do}{\variable[K]{S}}}{\terminal{if}{\variable[K]{B}}\terminal{then}{{\variable[K]{S}}\terminal{;}{\terminal{while}{\variable[K]{B}}\terminal{do}{\variable[K]{S}}}}\terminal{else}{\{\}}}}
}{}{}

\begin{syntaxBlock}{\nonTerminal{\sort{KResult}}}\syntax{{\nonTerminal{\sort{String}}}}{}
\end{syntaxBlock}
\krule{
\reduce{{\variable[String]{Str1}}\terminal{+}{\variable[String]{Str2}}}{{\variable[String]{Str1}}+_{\scriptstyle\it String}{\variable[String]{Str2}}}}{}{}
\krule{
\kprefix[green]{k}{\reduce{\terminal{++}{\variable[Id]{X}}}{{\variable[Int]{I}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{N}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{N}\mapsto\reduce{\variable[Int]{I}}{{\variable[Int]{I}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
}{}{supercool, transition}
\krule{
\kprefix[green]{k}{\reduce{\terminal{read}()}{\variable[Int]{I}}}
\mathrel{}\kprefix[magenta]{in}{\reduce{\variable[Int]{I}}{\dotCt{List}}}
}{}{transition}

\begin{syntaxBlock}{\nonTerminal{\sort{Printable}}}\syntax{{\nonTerminal{\sort{Int}}}}{}\syntaxCont{{\nonTerminal{\sort{String}}}}{}
\end{syntaxBlock}
\krule{
\kprefix[green]{k}{\terminal{print}({{\variable[Printable]{P}}\mathpunct{\terminalNoSpace{,}}{\reduce{\variable[AExps]{AEs}}{\variable[AExps]{AEs}}}})}
\mathrel{}\ksuffix[Orchid]{out}{\reduce{\dotCt{List}}{\variable[Printable]{P}}}
}{}{transition}
\krule{
\reduce{\terminal{print}({\dotCt{AExps}})}{\dotCt{K}}}{}{structural}
\krule{
\reduce{\kmiddle[orange]{threads}{\kprefix[green]{k}{\terminal{halt}}
}
}{\kall[orange]{threads}{\dotCt{Bag}}
}}{}{}
\krule{
\kprefix[green]{k}{\reduce{\terminal{spawn}{\variable[K]{S}}}{\dotCt{K}}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{{\rho}}}
\mathrel{}\reduce{\dotCt{Bag}}{\kmiddle[red]{thread}{\kall[green]{k}{\variable[K]{S}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{{\rho}}}
}
}}{}{}
\krule{
\reduce{\kmiddle[red]{thread}{\kall[green]{k}{\dotCt{K}}
}
}{\dotCt{Bag}}}{}{structural}
\krule{
\reduce{\{\}}{\dotCt{K}}}{}{structural}
\krule{
\kprefix[green]{k}{\reduce{\{{\variable[K]{S}}\}}{\variable[K]{S}\kra\terminal{env}({\variable[Map]{{\rho}}})}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{{\rho}}}
}{}{structural}
\krule{
\kprefix[green]{k}{\terminal{var}{{\variable[K]{X}}\mathpunct{\terminalNoSpace{,}}{\reduce{\variable[Ids]{Xl}}{\variable[Ids]{Xl}}}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{{\rho}}}{{\variable[Map]{{\rho}}}[{\variable[K]{N}}\terminal{/}{\variable[K]{X}}]}}
\mathrel{}\kmiddle[white]{store}{\reduce{\dotCt{Map}}{\variable[K]{N}\mapsto\constant[\#Int]{0}}}
\mathrel{}\kall[gray]{nextLoc}{{\reduce{\variable[K]{N}}{\variable[K]{N}}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}
}{}{}
\krule{
\reduce{\terminal{var}{\dotCt{Ids}}}{\dotCt{K}}}{}{structural}

\begin{syntaxBlock}{\nonTerminal{\sort{K}}}\syntax{\terminal{env}({{\nonTerminal{\sort{Map}}}})}{}
\end{syntaxBlock}
\krule{
\reduce{\terminal{env}({\AnyVar[Map]})}{\dotCt{K}}\kra\terminal{env}({\AnyVar[Map]})}{}{structural}
\krule{
\kprefix[green]{k}{\reduce{\terminal{env}({\variable[Map]{{\rho}}})}{\dotCt{K}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\AnyVar[Map]}{\variable[Map]{{\rho}}}}
}{}{structural}
\end{module}
\end{kdefinition}
\end{document}
