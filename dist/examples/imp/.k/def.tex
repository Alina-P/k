\nonstopmode
\documentclass{article}
\usepackage[poster,style=bubble]{k}
\title{IMP}
\begin{document}
\begin{kdefinition}
\maketitle
\begin{module}{\moduleName{IMP-SYNTAX}}

\begin{syntaxBlock}{\nonTerminal{\sort{AExp}}}\syntax{{\nonTerminal{\sort{Int}}}}{}\syntaxCont{{\nonTerminal{\sort{Id}}}}{}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\terminal{/}{{\nonTerminal{\sort{AExp}}}}}{strict}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\terminal{+}{{\nonTerminal{\sort{AExp}}}}}{strict}\syntaxCont{({\nonTerminal{\sort{AExp}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{BExp}}}\syntax{{\nonTerminal{\sort{Bool}}}}{}\syntaxCont{{{\nonTerminal{\sort{AExp}}}}\terminal{<=}{{\nonTerminal{\sort{AExp}}}}}{seqstrict}\syntaxCont{\terminal{not}{{\nonTerminal{\sort{BExp}}}}}{strict}\syntaxCont{{{\nonTerminal{\sort{BExp}}}}\terminal{and}{{\nonTerminal{\sort{BExp}}}}}{strict(1)}\syntaxCont{({\nonTerminal{\sort{BExp}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Stmt}}}\syntax{\terminal{skip}}{}\syntaxCont{{{\nonTerminal{\sort{Id}}}}\terminal{:=}{{\nonTerminal{\sort{AExp}}}}}{strict(2)}\syntaxCont{\terminal{if}{{\nonTerminal{\sort{BExp}}}}\terminal{then}{{\nonTerminal{\sort{Stmt}}}}\terminal{else}{{\nonTerminal{\sort{Stmt}}}}}{strict(1)}\syntaxCont{\terminal{while}{{\nonTerminal{\sort{BExp}}}}\terminal{do}{{\nonTerminal{\sort{Stmt}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Stmt}}}}\terminal{;}{{\nonTerminal{\sort{Stmt}}}}}{}\syntaxCont{({\nonTerminal{\sort{Stmt}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Pgm}}}\syntax{\terminal{var}{{\nonTerminal{\sort{Ids}}}}\terminal{;}{{\nonTerminal{\sort{Stmt}}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Ids}}}\syntax{List\{Id, \mbox{``},\mbox{''}\}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Start}}}\syntax{{\nonTerminal{\sort{Pgm}}}}{}
\end{syntaxBlock}
\end{module}
\begin{module}{\moduleName{IMP}}
\kconfig{\kall[yellow]{T}{\kall[green]{k}{\variable[K]{\$PGM}}
\mathrel{}\kall[red]{env}{\dotCt{Map}}
}
}

\begin{syntaxBlock}{\nonTerminal{\sort{KResult}}}\syntax{{\nonTerminal{\sort{Int}}}}{}\syntaxCont{{\nonTerminal{\sort{Bool}}}}{}
\end{syntaxBlock}
\krule[lookup]{
\kprefix[green]{k}{\reduce{\variable[Id]{X}}{\variable[Int]{I}}}
\mathrel{}\kmiddle[red]{env}{\variable[Id]{X}\mapsto\variable[Int]{I}}
}{}{}
\krule[assignment]{
\kprefix[green]{k}{\reduce{{\variable[Id]{X}}\terminal{:=}{\variable[Int]{I}}}{\dotCt{K}}}
\mathrel{}\kmiddle[red]{env}{\variable[Id]{X}\mapsto\reduce{\AnyVar[List\{K\}]}{\variable[Int]{I}}}
}{}{}
\krule[addition]{
\reduce{{\variable[Int]{I1}}\terminal{+}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{+_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{}
\krule[division]{
\reduce{{\variable[Int]{I1}}\terminal{/}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\div_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{{\variable[Int]{I2}}\terminal{=/=K}{\constant[\#Int]{0}}}{}
\krule[leq]{
\reduce{{\variable[Int]{I1}}\terminal{<=}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\leq_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{}
\krule[not]{
\reduce{\terminal{not}{\variable[Bool]{T}}}{\neg_{\scriptstyle\it Bool}{\variable[Bool]{T}}}}{}{}
\krule[and-true]{
\reduce{{\constant[\#Bool]{true}}\terminal{and}{\variable[BExp]{B}}}{\variable[BExp]{B}}}{}{}
\krule[and-false]{
\reduce{{\constant[\#Bool]{false}}\terminal{and}{\variable[BExp]{B}}}{\constant[\#Bool]{false}}}{}{}
\krule[skip]{
\reduce{\terminal{skip}}{\dotCt{K}}}{}{}
\krule[sequential]{
\reduce{{\variable[K]{S1}}\terminal{;}{\variable[K]{S2}}}{\variable[K]{S1}\kra\variable[K]{S2}}}{}{structural}
\krule[if-true]{
\reduce{\terminal{if}{\constant[\#Bool]{true}}\terminal{then}{\variable[K]{S}}\terminal{else}{\AnyVar[K]}}{\variable[K]{S}}}{}{}
\krule[if-false]{
\reduce{\terminal{if}{\constant[\#Bool]{false}}\terminal{then}{\AnyVar[K]}\terminal{else}{\variable[K]{S}}}{\variable[K]{S}}}{}{}
\krule[while]{
\kprefix[green]{k}{\reduce{\terminal{while}{\variable[K]{B}}\terminal{do}{\variable[K]{S}}}{\terminal{if}{\variable[K]{B}}\terminal{then}{{\variable[K]{S}}\terminal{;}{\terminal{while}{\variable[K]{B}}\terminal{do}{\variable[K]{S}}}}\terminal{else}{\terminal{skip}}}}
}{}{structural}
\krule[program-still-vars]{
\kprefix[green]{k}{\reduce{\terminal{var}{{\variable[Id]{X}}\mathpunct{\terminalNoSpace{,}}{\variable[Ids]{Xs}}}\terminal{;}{\variable[K]{S}}}{\terminal{var}{\variable[Ids]{Xs}}\terminal{;}{\variable[K]{S}}}}
\mathrel{}\kall[red]{env}{\variable[Map]{{\rho}}\mathrel{}\reduce{\dotCt{Map}}{\variable[Id]{X}\mapsto\constant[\#Int]{0}}}
}{\neg_{\scriptstyle\it Bool}{{\variable[Id]{X}}\terminal{in}{\terminal{keys}{\variable[Map]{{\rho}}}}}}{}
\krule[program-no-vars]{
\kprefix[green]{k}{\reduce{\terminal{var}{\dotCt{Ids}}\terminal{;}{\variable[K]{S}}}{\variable[K]{S}}}
}{}{structural}
\end{module}
\end{kdefinition}
\end{document}
