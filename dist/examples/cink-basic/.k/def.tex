\nonstopmode
\documentclass{article}
\usepackage[poster,style=bubble]{k}
\title{CINK}
\begin{document}
\begin{kdefinition}
\maketitle
\begin{module}{\moduleName{CINK-LANG-SYNTAX}}

\begin{syntaxBlock}{\nonTerminal{\sort{Decl}}}\syntax{\terminal{int}{{\nonTerminal{\sort{Exps}}}}}{}\syntaxCont{\terminal{void}{{\nonTerminal{\sort{Exps}}}}}{}\syntaxCont{\terminal{bool}{{\nonTerminal{\sort{Exps}}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Val}}}\syntax{\terminal{cout}}{}\syntaxCont{\terminal{cin}}{}\syntaxCont{{\nonTerminal{\sort{Bool}}}}{}\syntaxCont{{\nonTerminal{\sort{String}}}}{}\syntaxCont{{\nonTerminal{\sort{Int}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Exp}}}\syntax{{\nonTerminal{\sort{Id}}}}{}\syntaxCont{{\nonTerminal{\sort{Val}}}}{}\syntaxCont{({\nonTerminal{\sort{Exp}}})}{}\syntaxCont{{{\nonTerminal{\sort{Id}}}}({{\nonTerminal{\sort{Exps}}}})}{strict(1)}\syntaxCont{\terminal{\&}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{\terminal{*}{{\nonTerminal{\sort{Exp}}}}}{strict}\syntaxCont{\terminal{++}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{*}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{/}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\%{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{+}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{-}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{>}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\leq{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{==}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{\terminal{!}{{\nonTerminal{\sort{Exp}}}}}{strict}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\mathrel{\&\&}{{\nonTerminal{\sort{Exp}}}}}{strict(1)}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{||}{{\nonTerminal{\sort{Exp}}}}}{strict(1)}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\mathrel{\tt <<}{{\nonTerminal{\sort{Exp}}}}}{seqstrict}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\mathrel{\tt >>}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{{{\nonTerminal{\sort{Exp}}}}\terminal{=}{{\nonTerminal{\sort{Exp}}}}}{}\syntaxCont{\terminal{endl}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{\#Id}}}\syntax{\terminal{main}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Stmt}}}\syntax{{{\nonTerminal{\sort{Exp}}}}\terminal{;}}{strict}\syntaxCont{\texttt{\#include<iostream>}}{}\syntaxCont{\texttt{using namespace std;}}{}\syntaxCont{{{\nonTerminal{\sort{Decl}}}}\terminal{;}}{}\syntaxCont{\{\}}{}\syntaxCont{\{{{\nonTerminal{\sort{Stmts}}}}\}}{}\syntaxCont{\terminal{while}({{\nonTerminal{\sort{Exp}}}}){{\nonTerminal{\sort{Stmt}}}}}{}\syntaxCont{\terminal{return}{{\nonTerminal{\sort{Exps}}}}\terminal{;}}{}\syntaxCont{{{\nonTerminal{\sort{Decl}}}}({{\nonTerminal{\sort{Decls}}}})\{{{\nonTerminal{\sort{Stmts}}}}\}}{}\syntaxCont{\terminal{if}({{\nonTerminal{\sort{Exp}}}}){{\nonTerminal{\sort{Stmt}}}}\terminal{else}{{\nonTerminal{\sort{Stmt}}}}}{strict(1)}\syntaxCont{\terminal{if}({{\nonTerminal{\sort{Exp}}}}){{\nonTerminal{\sort{Stmt}}}}}{}\syntaxCont{\terminal{std::thread}{{\nonTerminal{\sort{Id}}}}({{\nonTerminal{\sort{Exps}}}})\terminal{;}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Pgm}}}\syntax{{\nonTerminal{\sort{Stmts}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Stmts}}}\syntax{{\nonTerminal{\sort{Stmt}}}}{}\syntaxCont{{{\nonTerminal{\sort{Stmts}}}}\mathrel{}{{\nonTerminal{\sort{Stmts}}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Exps}}}\syntax{List\{Exp, \mbox{``},\mbox{''}\}}{strict}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Decls}}}\syntax{List\{Decl, \mbox{``},\mbox{''}\}}{}
\end{syntaxBlock}
\end{module}
\begin{module}{\moduleName{CINK-LANG-SEMANTICS}}

\begin{syntaxBlock}{\nonTerminal{\sort{LVal}}}\syntax{\terminal{loc}({{\nonTerminal{\sort{Int}}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Val}}}\syntax{\terminal{void}}{}\syntaxCont{\terminal{undefined}}{}\syntaxCont{{\nonTerminal{\sort{LVal}}}}{}\syntaxCont{\lambda\,{{\nonTerminal{\sort{Decls}}}}\mathrel{\bullet}{{\nonTerminal{\sort{Stmts}}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Vals}}}\syntax{List\{Val, \mbox{``},\mbox{''}\}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{KResult}}}\syntax{{\nonTerminal{\sort{Val}}}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{Exp}}}\syntax{\terminal{lvalue}({{\nonTerminal{\sort{Exp}}}})}{}\syntaxCont{\terminal{rvalue}({{\nonTerminal{\sort{Exp}}}})}{strict}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{K}}}\syntax{\terminal{execute}}{}\syntaxCont{\terminal{noname}}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{ListItem}}}\syntax{({{\nonTerminal{\sort{List}}}},{{\nonTerminal{\sort{K}}}})}{}\syntaxCont{[{{\nonTerminal{\sort{Map}}}}]}{}
\end{syntaxBlock}
\kconfig{\kall[yellow]{T}{\kall[pink]{threads}{\kall[purple]{thread}{\kall[yellow]{name}{\terminal{noname}}
\mathrel{}\kall[green]{k}{\variable[Pgm]{\$PGM}\kra\terminal{execute}}
\mathrel{}\kall[LightSkyBlue]{env}{\dotCt{Map}}
\mathrel{}\kall[orange]{bstack}{\dotCt{List}}
\mathrel{}\kall[orange]{fstack}{\dotCt{List}}
}
}
\mathrel{}\kall[SkyBlue]{genv}{\dotCt{Map}}
\mathrel{}\kall[white]{store}{\dotCt{Map}}
\mathrel{}\kall[magenta]{in}{\variable[List]{\$IN}}
\mathrel{}\kall[Orchid]{out}{\dotCt{List}}
\mathrel{}\kall{nextLoc}{\constant[\#Int]{0}}
}
}
\krule{
\reduce{\terminal{if}({\variable[Exp]{B}}){\variable[Stmt]{St}}}{\terminal{if}({\variable[Exp]{B}}){\variable[Stmt]{St}}\terminal{else}{\{\}}}}{}{anywhere}
\krule{
\reduce{\constant[KLabel]{'\_;}(\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\variable[Exp]{E}\kcomma\variable[Exps]{Es})))}{\constant[KLabel]{'\_\_}(\constant[KLabel]{'\_;}(\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\variable[Exp]{E}\kcomma\dotCt{Exps})))\kcomma\constant[KLabel]{'\_;}(\variable[KLabel]{KL}(\variable[Exps]{Es})))}}{{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}\wedge_{\scriptstyle\it Bool}{{\variable[Exps]{Es}}\terminal{=/=K}{\dotCt{Exps}}}}{anywhere}
\krule{
\reduce{\constant[KLabel]{'\_;}(\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\constant[KLabel]{'\_=\_}(\variable[Exp]{E1}\kcomma\variable[Exp]{E2})\kcomma\dotCt{Exps})))}{\constant[KLabel]{'\_\_}(\constant[KLabel]{'\_;}(\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\variable[Exp]{E1}\kcomma\dotCt{Exps})))\kcomma\constant[KLabel]{'\_;}(\constant[KLabel]{'\_=\_}(\terminal{getName}({\variable[Exp]{E1}})\kcomma\variable[Exp]{E2})))}}{{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}\wedge_{\scriptstyle\it Bool}{{\terminal{isAlias}({\constant[KLabel]{'\_=\_}(\variable[Exp]{E1}\kcomma\variable[Exp]{E2})})}\terminal{=/=K}{\constant[\#Bool]{true}}}}{anywhere}
\krule[fun-decl]{
\kprefix[green]{k}{\reduce{\constant[KLabel]{'\_\`{}(\_\`{})\`{}\{\_\`{}\}}(\variable[Decl]{Decl}\kcomma\variable[Decls]{Xl}\kcomma\variable[Stmts]{Sts})}{\dotCt{K}}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\reduce{\dotCt{Map}}{\terminal{getName}({\variable[Decl]{Decl}})\mapsto\variable[Int]{L}}}
\mathrel{}\kmiddle[white]{store}{\reduce{\dotCt{Map}}{\variable[Int]{L}\mapsto\lambda\,{\variable[Decls]{Xl}}\mathrel{\bullet}{\variable[Stmts]{Sts}}}}
\mathrel{}\kall{nextLoc}{\reduce{\variable[Int]{L}}{{\variable[Int]{L}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
}{}{structural}
\kcontext{
\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}({\terminal{\&}{\AnyVar[K]}}\terminal{=}{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}\kcomma\dotCt{Exps}))}{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}{}
\krule[alias-decl]{
\kprefix[green]{k}{\reduce{\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}({\terminal{\&}{\variable[Id]{X}}}\terminal{=}{\terminal{loc}({\variable[Int]{L}})}\kcomma\dotCt{Exps}))}{\terminal{void}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{Env}}{{\variable[Map]{Env}}[{\variable[Int]{L}}\terminal{/}{\variable[Id]{X}}]}}
}{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}{structural}
\krule[var-decl]{
\kprefix[green]{k}{\reduce{\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\variable[Exp]{E}\kcomma\dotCt{Exps}))}{\terminal{void}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{Env}}{{\variable[Map]{Env}}[{\variable[Int]{L}}\terminal{/}{\terminal{getName}({\variable[Exp]{E}})}]}}
\mathrel{}\kmiddle[white]{store}{\reduce{\dotCt{Map}}{\variable[Int]{L}\mapsto\terminal{undefined}}}
\mathrel{}\kall{nextLoc}{\reduce{\variable[Int]{L}}{{\variable[Int]{L}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
}{{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}\wedge_{\scriptstyle\it Bool}{{\terminal{isAlias}({\variable[Exp]{E}})}\terminal{=/=K}{\constant[\#Bool]{true}}}}{structural}
\krule[include]{
\kprefix[green]{k}{\reduce{\texttt{\#include<iostream>}}{\dotCt{K}}}
}{}{structural}
\krule[using]{
\kprefix[green]{k}{\reduce{\texttt{using namespace std;}}{\dotCt{K}}}
}{}{structural}
\krule{
\kall[green]{k}{\reduce{\terminal{execute}}{\constant[KLabel]{'\_;}(\constant[KLabel]{'\_\`{}(\_\`{})}(\constant[\#Id]{main}\kcomma\dotCt{Vals}))}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
\mathrel{}\kall[SkyBlue]{genv}{\reduce{\dotCt{Map}}{\variable[Map]{Env}}}
}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{+}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{+}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{+}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{+_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{-}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{-}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{-}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{-_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{*}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{*}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{\constant[KLabel]{'\_*\_}(\variable[Int]{I1}\kcomma\variable[Int]{I2})}{{\variable[Int]{I1}}\mathrel{\ast_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{/}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{/}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{/}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\div_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{{\variable[Int]{I2}}\terminal{=/=Int}{\constant[\#Int]{0}}}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\%{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\%{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\%{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\%_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{{\variable[Int]{I2}}\terminal{=/=Int}{\constant[\#Int]{0}}}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{>}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{>}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{>}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{>_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\leq{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\leq{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\leq{\variable[Int]{I2}}}{{\variable[Int]{I1}}\mathrel{\leq_{\scriptstyle\it Int}}{\variable[Int]{I2}}}}{}{structural}
\kcontext{
{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}\terminal{==}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{==}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule{
\reduce{{\variable[Int]{I1}}\terminal{==}{\variable[Int]{I2}}}{{\variable[Int]{I1}}\terminal{==Int}{\variable[Int]{I2}}}}{}{structural}
\krule{
\reduce{{\constant[\#Bool]{true}}\mathrel{\&\&}{\variable[Exp]{B}}}{\variable[Exp]{B}}}{}{structural}
\krule{
\reduce{{\constant[\#Bool]{false}}\mathrel{\&\&}{\variable[Exp]{B}}}{\constant[\#Bool]{false}}}{}{structural}
\krule{
\reduce{{\constant[\#Bool]{true}}\terminal{||}{\variable[Exp]{B}}}{\constant[\#Bool]{true}}}{}{structural}
\krule{
\reduce{{\constant[\#Bool]{false}}\terminal{||}{\variable[Exp]{B}}}{\variable[Exp]{B}}}{}{structural}
\krule{
\reduce{\terminal{!}{\constant[\#Bool]{false}}}{\constant[\#Bool]{true}}}{}{structural}
\krule{
\reduce{\terminal{!}{\constant[\#Bool]{true}}}{\constant[\#Bool]{false}}}{}{structural}
\krule{
\reduce{\terminal{endl}}{\constant[\#String]{"\textbackslash n"}}}{}{structural}
\krule[indirection]{
\kprefix[green]{k}{\reduce{\terminal{*}{\variable[Int]{L}}}{\variable[K]{V}}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{L}\mapsto\variable[K]{V}}
}{}{}
\kcontext{
\terminal{\&}{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}}{}{}
\krule{
\reduce{\terminal{\&}{\terminal{loc}({\variable[Int]{L}})}}{\variable[Int]{L}}}{}{}
\kcontext{
\terminal{++}{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}}{}{}
\krule{
\kprefix[green]{k}{\reduce{\terminal{++}{\terminal{loc}({\variable[K]{L}})}}{\terminal{loc}({\variable[K]{L}})}}
\mathrel{}\kmiddle[white]{store}{\variable[K]{L}\mapsto\reduce{\variable[Int]{V}}{{\variable[Int]{V}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
}{}{}
\kcontext{
\terminal{lvalue}({\khole{}})}{{\terminal{isLValue}({\khole{}})}\terminal{=/=K}{\constant[\#Bool]{true}}}{}
\krule{
\reduce{\terminal{lvalue}({\variable[Int]{L}})}{\terminal{loc}({\variable[Int]{L}})}}{}{structural}
\krule{
\reduce{\terminal{lvalue}({\terminal{loc}({\variable[Int]{L}})})}{\terminal{loc}({\variable[Int]{L}})}}{}{structural}
\krule{
\kprefix[green]{k}{\reduce{\terminal{rvalue}({\terminal{loc}({\variable[Int]{L}})})}{\variable[Val]{V}}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{L}\mapsto\variable[Val]{V}}
}{}{}
\krule{
\reduce{\terminal{rvalue}({\variable[Val]{V}})}{\variable[Val]{V}}}{{\constant[KLabel]{'isLVal}(\variable[Val]{V})}\terminal{=/=K}{\constant[\#Bool]{true}}}{}
\krule[mem-lookup-lvalue]{
\kprefix[green]{k}{\reduce{\terminal{lvalue}({\variable[Id]{X}})}{\terminal{loc}({\variable[Int]{L}})}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{L}}
}{}{transition}
\krule[mem-lookup-lvalue-indirect]{
\kprefix[green]{k}{\reduce{\terminal{lvalue}({\terminal{*}{\variable[Id]{X}}})}{\terminal{loc}({\variable[Val]{V}})}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{L}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{L}\mapsto\variable[Val]{V}}
}{}{transition}
\krule[mem-lookup-rvalue]{
\kprefix[green]{k}{\reduce{\variable[Id]{X}}{\variable[Val]{V}}}
\mathrel{}\kmiddle[LightSkyBlue]{env}{\variable[Id]{X}\mapsto\variable[Int]{L}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{L}\mapsto\variable[Val]{V}}
}{}{transition}
\kcontext{
{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}\terminal{=}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\terminal{=}{\reduce{\khole{}}{\terminal{rvalue}({\khole{}})}}}{}{}
\krule[mem-update]{
\kprefix[green]{k}{\reduce{{\terminal{loc}({\variable[Int]{L}})}\terminal{=}{\variable[Val]{V}}}{\variable[Val]{V}}}
\mathrel{}\kmiddle[white]{store}{\variable[Int]{L}\mapsto\reduce{\AnyVar[List\{K\}]}{\variable[Val]{V}}}
}{}{transition}
\krule[while]{
\reduce{\terminal{while}({\variable[Exp]{B}}){\variable[Stmt]{St}}}{\terminal{if}({\variable[Exp]{B}}){\{{{\variable[Stmt]{St}}\mathrel{}{\terminal{while}({\variable[Exp]{B}}){\variable[Stmt]{St}}}}\}}\terminal{else}{\{\}}}}{}{structural}
\krule[if-false]{
\reduce{\terminal{if}({\constant[\#Bool]{false}}){\AnyVar[K]}\terminal{else}{\variable[Stmt]{St}}}{\variable[Stmt]{St}}}{}{}
\krule[if-true]{
\reduce{\terminal{if}({\constant[\#Bool]{true}}){\variable[Stmt]{St}}\terminal{else}{\AnyVar[K]}}{\variable[Stmt]{St}}}{}{}
\krule[instr-expr]{
\kall[green]{k}{\reduce{{\variable[Val]{V}}\terminal{;}\kra\variable[K]{K}}{\variable[K]{K}}}
}{{\variable[K]{K}}\terminal{=/=K}{\dotCt{K}}}{}
\krule[block]{
\kprefix[green]{k}{\reduce{\{{\variable[Stmts]{Sts}}\}}{\variable[Stmts]{Sts}\kra\terminal{popb}}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
\mathrel{}\kall[orange]{bstack}{\reduce{\dotCt{List}}{[{\variable[Map]{Env}}]}}
}{}{structural}
\krule[block]{
\kprefix[green]{k}{\reduce{\{{\variable[Stmts]{Sts}}\}}{\variable[Stmts]{Sts}\kra\terminal{popb}}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
\mathrel{}\kprefix[orange]{bstack}{\reduce{\dotCt{List}}{[{\variable[Map]{Env}}]}\mathrel{}[{\variable[Map]{Env1}}]}
}{{\variable[Map]{Env}}\terminal{=/=Map}{\variable[Map]{Env1}}}{structural}
\krule[block]{
\kprefix[green]{k}{\reduce{\{{\variable[Stmts]{Sts}}\}}{\variable[Stmts]{Sts}}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
\mathrel{}\kprefix[orange]{bstack}{[{\variable[Map]{Env1}}]}
}{{\variable[Map]{Env}}\terminal{==Map}{\variable[Map]{Env1}}}{structural}
\krule[block-empty]{
\reduce{\{\}}{\dotCt{K}}}{}{structural}
\krule[seq-comp]{
\reduce{{\variable[Stmts]{Sts}}\mathrel{}{\variable[Stmts]{Sts'}}}{\variable[Stmts]{Sts}\kra\variable[Stmts]{Sts'}}}{}{structural}
\krule[print-stream]{
\kprefix[green]{k}{\reduce{{\terminal{cout}}\mathrel{\tt <<}{\variable[Val]{V}}}{\terminal{cout}}}
\mathrel{}\ksuffix[Orchid]{out}{\reduce{\dotCt{List}}{\variable[Val]{V}\mathrel{}\constant[\#String]{" "}}}
}{}{}
\kcontext{
{\khole{}}\mathrel{\tt >>}{\AnyVar[K]}}{}{}
\kcontext{
{\AnyVar[K]}\mathrel{\tt >>}{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}}{}{}
\krule[read-stream]{
\kprefix[green]{k}{\reduce{{\terminal{cin}}\mathrel{\tt >>}{\terminal{loc}({\variable[K]{L}})}}{\terminal{cin}}}
\mathrel{}\kmiddle[white]{store}{\variable[K]{L}\mapsto\reduce{\AnyVar[List\{K\}]}{\variable[Int]{I}}}
\mathrel{}\kprefix[magenta]{in}{\reduce{\variable[Int]{I}}{\dotCt{List}}}
}{}{}
\krule[fun-call]{
\kall[green]{k}{\reduce{\constant[KLabel]{'\_\`{}(\_\`{})}(\lambda\,{\variable[Decls]{Xl}}\mathrel{\bullet}{\variable[Stmts]{Sts}}\kcomma\variable[Vals]{Vl})\kra\variable[K]{K}}{\terminal{bind}{\variable[Vals]{Vl}}\terminal{to}{\variable[Decls]{Xl}}\terminal{;}\kra\variable[Stmts]{Sts}\kra\terminal{return}{{\terminal{void}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}\terminal{;}}}
\mathrel{}\kall[SkyBlue]{genv}{\variable[Map]{GEnv}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{Env}}{\variable[Map]{GEnv}}}
\mathrel{}\kall[orange]{bstack}{\variable[List]{Stack}}
\mathrel{}\kprefix[orange]{fstack}{\reduce{\dotCt{List}}{({[{\variable[Map]{Env}}]\mathrel{}\variable[List]{Stack}},{\variable[K]{K}})}}
}{}{}
\kcontext{
\constant[KLabel]{'\_\`{}(\_\`{})}(\lambda\,{\variable[Decls]{Xl}}\mathrel{\bullet}{\variable[Stmts]{Sts}}\kcomma\reduce{\khole{}}{\terminal{evaluate}{\khole{}}\terminal{following}{\variable[Decls]{Xl}}\terminal{;}})}{}{}

\begin{syntaxBlock}{\nonTerminal{\sort{Exps}}}\syntax{\terminal{evaluate}{{\nonTerminal{\sort{Exps}}}}\terminal{following}{{\nonTerminal{\sort{Decls}}}}\terminal{;}}{}
\end{syntaxBlock}
\kcontext{
\terminal{evaluate}{{\khole{}}\mathpunct{\terminalNoSpace{,}}{\AnyVar[Exps]}}\terminal{following}{{\terminal{int}{{\variable[Id]{X}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}}\mathpunct{\terminalNoSpace{,}}{\AnyVar[Decls]}}\terminal{;}}{}{}
\kcontext{
\terminal{evaluate}{{\reduce{\khole{}}{\terminal{lvalue}({\khole{}})}}\mathpunct{\terminalNoSpace{,}}{\AnyVar[Exps]}}\terminal{following}{{\terminal{int}{{\terminal{\&}{\variable[Id]{X}}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}}\mathpunct{\terminalNoSpace{,}}{\AnyVar[Decls]}}\terminal{;}}{}{}
\krule{
\reduce{\terminal{evaluate}{{\variable[Val]{V}}\mathpunct{\terminalNoSpace{,}}{\variable[Exps]{El}}}\terminal{following}{{\variable[Decl]{Dec}}\mathpunct{\terminalNoSpace{,}}{\variable[Decls]{Xl}}}\terminal{;}}{{\variable[Val]{V}}\mathpunct{\terminalNoSpace{,}}{\terminal{evaluate}{\variable[Exps]{El}}\terminal{following}{\variable[Decls]{Xl}}\terminal{;}}}}{}{}
\krule{
\reduce{\terminal{evaluate}{\dotCt{Exps}}\terminal{following}{\dotCt{Decls}}\terminal{;}}{\dotCt{Vals}}}{}{}

\begin{syntaxBlock}{\nonTerminal{\sort{K}}}\syntax{\terminal{bind}{{\nonTerminal{\sort{Vals}}}}\terminal{to}{{\nonTerminal{\sort{Decls}}}}\terminal{;}}{}
\end{syntaxBlock}
\krule{
\kprefix[green]{k}{\terminal{bind}{\reduce{{\variable[Val]{V}}\mathpunct{\terminalNoSpace{,}}{\variable[Vals]{Vs}}}{\variable[Vals]{Vs}}}\terminal{to}{\reduce{{\terminal{int}{{\variable[Id]{X}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}}\mathpunct{\terminalNoSpace{,}}{\variable[Decls]{Xl}}}{\variable[Decls]{Xl}}}\terminal{;}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{Env}}{{\variable[Map]{Env}}[{\variable[Int]{L}}\terminal{/}{\variable[Id]{X}}]}}
\mathrel{}\kmiddle[white]{store}{\reduce{\dotCt{Map}}{\variable[Int]{L}\mapsto\variable[Val]{V}}}
\mathrel{}\kall{nextLoc}{\reduce{\variable[Int]{L}}{{\variable[Int]{L}}\mathrel{+_{\scriptstyle\it Int}}{\constant[\#Int]{1}}}}
}{}{}
\krule{
\kprefix[green]{k}{\terminal{bind}{\reduce{{\terminal{loc}({\variable[Int]{L}})}\mathpunct{\terminalNoSpace{,}}{\variable[Vals]{Vs}}}{\variable[Vals]{Vs}}}\terminal{to}{\reduce{{\terminal{int}{{\terminal{\&}{\variable[Id]{X}}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}}\mathpunct{\terminalNoSpace{,}}{\variable[Decls]{Xl}}}{\variable[Decls]{Xl}}}\terminal{;}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\variable[Map]{Env}}{{\variable[Map]{Env}}[{\variable[Int]{L}}\terminal{/}{\variable[Id]{X}}]}}
}{}{}
\krule{
\reduce{\terminal{bind}{\dotCt{Vals}}\terminal{to}{\dotCt{Decls}}\terminal{;}}{\dotCt{K}}}{}{structural}
\krule[return]{
\reduce{\terminal{return}{\dotCt{Exps}}\terminal{;}}{\terminal{return}{{\terminal{void}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}\terminal{;}}}{}{transition}
\kcontext{
\terminal{return}{{\khole{}}\mathpunct{\terminalNoSpace{,}}{\variable[Exps]{Es}}}\terminal{;}}{}{}
\krule[return]{
\reduce{\terminal{return}{{\variable[Val]{V}}\mathpunct{\terminalNoSpace{,}}{\variable[Exps]{Es}}}\terminal{;}}{\terminal{return}{\variable[Exps]{Es}}\terminal{;}}}{{\variable[Exps]{Es}}\terminal{=/=K}{\dotCt{Exps}}}{transition}
\krule[return]{
\kall[green]{k}{\reduce{\terminal{return}{{\variable[Val]{V}}\mathpunct{\terminalNoSpace{,}}{\dotCt{Exps}}}\terminal{;}\kra\AnyVar[K]}{\variable[Val]{V}\kra\variable[K]{K}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\AnyVar[Map]}{\variable[Map]{Env}}}
\mathrel{}\kall[orange]{bstack}{\reduce{\AnyVar[List]}{\variable[List]{Stack}}}
\mathrel{}\kprefix[orange]{fstack}{\reduce{({[{\variable[Map]{Env}}]\mathrel{}\variable[List]{Stack}},{\variable[K]{K}})}{\dotCt{List}}}
}{}{transition}
\krule[thread]{
\kmiddle[purple]{thread}{\kprefix[green]{k}{\reduce{\constant[KLabel]{'std::thread\_\`{}(\_\`{});}(\variable[Id]{T}\kcomma\constant[KLabel]{'\_\`{},\_}(\variable[Id]{F}\kcomma\variable[Exps]{El}))}{\dotCt{K}}}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
}
\mathrel{}\reduce{\dotCt{Bag}}{\kmiddle[purple]{thread}{\kall[yellow]{name}{\variable[Id]{T}}
\mathrel{}\kall[green]{k}{\constant[KLabel]{'\_;}(\constant[KLabel]{'\_\`{}(\_\`{})}(\variable[Id]{F}\kcomma\variable[Exps]{El}))}
\mathrel{}\kall[LightSkyBlue]{env}{\variable[Map]{Env}}
}
}}{}{}
\krule[thread-end]{
\reduce{\kmiddle[purple]{thread}{\kall[green]{k}{\dotCt{K}}
}
}{\dotCt{Bag}}}{}{}

\begin{syntaxBlock}{\nonTerminal{\sort{Bool}}}\syntax{\terminal{isDeclLabel}({{\nonTerminal{\sort{KLabel}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}{\constant[\#Bool]{true}}}{{{{\variable[KLabel]{KL}}\terminal{==KLabel}{\constant[KLabel]{'int\_}}}\terminal{orElseBool}{{\variable[KLabel]{KL}}\terminal{==KLabel}{\constant[KLabel]{'bool\_}}}}\terminal{orElseBool}{{\variable[KLabel]{KL}}\terminal{==KLabel}{\constant[KLabel]{'void\_}}}}{anywhere}

\begin{syntaxBlock}{\nonTerminal{\sort{K}}}\syntax{\terminal{isAlias}({{\nonTerminal{\sort{Exp}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{isAlias}({{\terminal{\&}{\variable[Id]{X}}}\terminal{=}{\variable[Exp]{E}}})}{\constant[\#Bool]{true}}}{}{anywhere}

\begin{syntaxBlock}{\nonTerminal{\sort{Bool}}}\syntax{\terminal{isLValue}({{\nonTerminal{\sort{Exp}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{isLValue}({\terminal{lvalue}({\variable[Exp]{E}})})}{\constant[\#Bool]{true}}}{}{anywhere}
\krule{
\reduce{\terminal{isLValue}({\terminal{loc}({\variable[Int]{L}})})}{\constant[\#Bool]{true}}}{}{anywhere}
\krule{
\reduce{\terminal{isLValue}({\variable[Id]{X}})}{\constant[\#Bool]{true}}}{}{anywhere}
\krule{
\reduce{\terminal{isLValue}({\terminal{*}{\variable[Id]{X}}})}{\constant[\#Bool]{true}}}{}{anywhere}

\begin{syntaxBlock}{\nonTerminal{\sort{Id}}}\syntax{\terminal{getName}({{\nonTerminal{\sort{Exp}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{getName}({\variable[Id]{X}})}{\variable[Id]{X}}}{}{anywhere}
\krule{
\reduce{\terminal{getName}({\terminal{\&}{\variable[Id]{X}}})}{\variable[Id]{X}}}{}{anywhere}
\krule{
\reduce{\terminal{getName}({\terminal{*}{\variable[Id]{X}}})}{\variable[Id]{X}}}{}{anywhere}
\krule{
\reduce{\terminal{getName}({\variable[KLabel]{KL}(\variable[Exp]{E})})}{\terminal{getName}({\variable[Exp]{E}})}}{{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}\terminal{==Bool}{\constant[\#Bool]{true}}}{anywhere}
\krule{
\reduce{\terminal{getName}({{\variable[Exp]{E1}}\terminal{=}{\variable[Exp]{E2}}})}{\terminal{getName}({\variable[Exp]{E1}})}}{}{anywhere}
\krule{
\reduce{\terminal{getName}({\variable[KLabel]{KL}(\constant[KLabel]{'\_\`{},\_}(\variable[Exp]{E}\kcomma\dotCt{Exps}))})}{\terminal{getName}({\variable[Exp]{E}})}}{{\terminal{isDeclLabel}({\variable[KLabel]{KL}})}\terminal{==Bool}{\constant[\#Bool]{true}}}{anywhere}

\begin{syntaxBlock}{\nonTerminal{\sort{K}}}\syntax{\terminal{popb}}{}
\end{syntaxBlock}
\krule{
\kprefix[green]{k}{\reduce{\terminal{popb}}{\dotCt{K}}}
\mathrel{}\kprefix[orange]{bstack}{\reduce{[{\variable[Map]{Env}}]}{\dotCt{List}}}
\mathrel{}\kall[LightSkyBlue]{env}{\reduce{\AnyVar[Map]}{\variable[Map]{Env}}}
}{}{}
\end{module}
\begin{module}{\moduleName{CINK-SYNTAX}}

\begin{syntaxBlock}{\nonTerminal{\sort{Prop}}}\syntax{\terminal{eqTo}({{\nonTerminal{\sort{Id}}}},{{\nonTerminal{\sort{Val}}}})}{}
\end{syntaxBlock}
\end{module}
\begin{module}{\moduleName{CINK}}

\begin{syntaxBlock}{\nonTerminal{\sort{\#ModelCheckerState}}}\syntax{\terminal{KItem}({{\nonTerminal{\sort{Bag}}}})}{}
\end{syntaxBlock}

\begin{syntaxBlock}{\nonTerminal{\sort{\#Prop}}}\syntax{\terminal{\#eqTo}({{\nonTerminal{\sort{Id}}}},{{\nonTerminal{\sort{Val}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{eqTo}({\variable[Id]{X}},{\variable[Val]{V}})}{\terminal{\#eqTo}({\variable[Id]{X}},{\variable[Val]{V}})}}{}{anywhere}

\begin{syntaxBlock}{\nonTerminal{\sort{Int}}}\syntax{\terminal{val}({{\nonTerminal{\sort{Bag}}}},{{\nonTerminal{\sort{Id}}}})}{function}
\end{syntaxBlock}
\krule{
\reduce{\terminal{val}({\kmiddle{T}{\kmiddle{genv}{\variable[Id]{X}\mapsto\variable[Int]{L}}
\mathrel{}\kmiddle{store}{\variable[Int]{L}\mapsto\variable[Int]{I}}
}
},{\variable[Id]{X}})}{\variable[Int]{I}}}{}{anywhere}
\krule{
\reduce{{\terminal{KItem}({\variable[Bag]{B}})}\terminal{LTL|=}{\terminal{\#eqTo}({\variable[Id]{X}},{\variable[Int]{I}})}}{\constant[\#Bool]{true}}}{{\terminal{val}({\variable[Bag]{B}},{\variable[Id]{X}})}\terminal{==K}{\variable[Int]{I}}}{anywhere}
\end{module}
\end{kdefinition}
\end{document}
