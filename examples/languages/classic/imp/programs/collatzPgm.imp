// Tests the Collatz conjecture for numbers up to m and writes
// the total number of steps (for all numbers up to m) in s.

var m,s,n,q,r;
m:=100;
s:=0;
while not(m<=2) do (
  n:=m;
  m:=m+-1;
  while not (n<=1) do (
    s:=s+1;
    q:=n/2;
    r:=q+q+1;
    if r<=n
      then n:=n+n+n+1 else n:=q
  )
)

// s should be 3141 when m is initialized to 100
